
+++
title = 'Mysql存储引擎'
date = 2024-09-21T14:04:10+08:00
categories = ["MySQL"]
tags = ["mysql","数据库"]
+++

# **Mysql存储引擎**

## **1.Mysql的体系结构**

![](https://i.postimg.cc/MpV3xV4W/screenshot-16.png)


1. 连接层
2. 服务层
3. 引擎层
4. 存储层

## **2.存储引擎介绍**

存储引擎就是存储数据、建立索引、更新/查询数据等技术的实现方式 。存储引擎是基于表的，而不是基于库的，`所以存储引擎也可被称为表类型` 。我们可以在创建表的时候，来指定选择的存储引擎，如果没有指定将自动选择默认的存储引擎(InnoDB)。

### 2.1 InnoDB
![](https://i.postimg.cc/SK9K6WdY/screenshot-19.png)

1).介绍

InnoDB是一种兼顾高可靠性和高性能的通用存储引擎，在 MySQL 5.5之后，InnoDB是默认的MySQL存储引擎。

2).特点

●DML操作遵循ACID模型，支持事务；

●行级锁，提高并发访问性能；

●支持外键FOREIGN KEY约束，保证数据的完整性和正确性；

3).文件

参数：innodb\_file\_per\_table
````
show variables like 'innodb_file_per_table';
````

如果该参数开启，代表对于InnoDB引擎的表，每一张表都对应一个ibd文件。，存储该表的表结构（frm-早期的 、sdi-新版的）、数据和索引。
````
show variables like '%datadir%';
````

使用上面的命令查看自己表数据存储位置



4)*逻辑存储结构*

![](https://i.postimg.cc/XqkTkhMD/screenshot-17.png)


-  表空间: InnoDB存储引擎逻辑结构的最高层，ibd文件其实就是表空间文件，在表空间中可以包含多个Segment段。
- 段:表空间是由各个段组成的，常见的段有数据段、索引段、回滚段等。InnoDB中对于段的管理，都是引擎自身完成，不需要人为对其控制，一个段中包含多个区。
- 区:区是表空间的单元结构，每个区的大小为1M。默认情况下， InnoDB存储引擎页大小为16K，即一个区中一共有64个连续的页。
- 页:页是组成区的最小单元，`页也是InnoDB存储引擎磁盘管理的最小单元` ，每个页的大小默认为 16KB。为了保证页的连续性，InnoDB存储引擎每次从磁盘申请 4-5个区。
- 行: InnoDB存储引擎是面向行的，也就是说数据是按行进行存放的，在每一行中除了定义表时所指定的字段以外，还包含两个隐藏字段(后面会详细介绍)。

### **2.2 MyISAM（被）**

1).介绍

MyISAM是MySQL早期的默认存储引擎。

2).特点

不支持事务，不支持外键

支持表锁，不支持行锁

访问速度快



### **2.3Memory**

1).介绍

Memory引擎的表数据时存储在内存中的，由于受到硬件问题、或断电问题的影响，只能将这些表作为临时表或缓存使用。

2).特点

存放在内存中

hash索引（默认）



### **2.4三种引擎的区别**

![](https://i.postimg.cc/s29W4960/screenshot-18.png)










